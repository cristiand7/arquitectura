<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
         <h1>Add Product</h1>
  
       
         
         <h:outputLabel value="Select the Auction:"></h:outputLabel>
         <h:panelGrid columns="3">
             <h:form enctype="multipart/form-data">
             <h:selectOneMenu value="#{eventAddProduct.idAuction}"  >
                <f:selectItem itemLabel="Select a Suplier"/>
                <f:selectItems value="#{eventAddProduct.auctions}" 
                               var="a" itemValue="#{a.idauction}" itemLabel="#{a.idauction}">           
                </f:selectItems>
                  
            </h:selectOneMenu>
             
             
             <p:commandButton value="Load"  ajax="false " actionListener ="#{eventAddProduct.updateAuction()}"/>
             </h:form>
        </h:panelGrid>
         
         <h:panelGrid columns="2">
           
                <h:outputLabel value="Start Date:"></h:outputLabel>
                               
                <h:outputText  value="#{eventAddProduct.auction.startdate}" >
                <f:convertDateTime pattern="dd/MM/yyyy" type="date"/>
                </h:outputText>
                              

         </h:panelGrid>


          
                
         <h:panelGrid columns="2">
                <h:outputLabel value="Close Date:"></h:outputLabel>
                <h:outputText  value="#{eventAddProduct.auction.closedate}" >
                <f:convertDateTime pattern="dd/MM/yyyy" type="date"/>
                </h:outputText>
        </h:panelGrid>                


         
         <h2>  <h:outputText value="Id Product: #{eventAddProduct.idNewProduct}" /> </h2>
         <h:form enctype="multipart/form-data">
         <h:panelGrid columns="2">
            <h:panelGrid columns="2">

                <p:outputLabel for="name" value="Name:"></p:outputLabel>
                <p:inputText  id="name" required="true"  value="#{eventAddProduct.name}"/>

                <p:outputLabel for="description" value="Description:"></p:outputLabel>
                <p:inputText id="description" required="true" value="#{eventAddProduct.description}"/>

                <br/>

            </h:panelGrid>
             <h:form>
                 <p:commandButton value="Add"  ajax="false " actionListener ="#{eventAddProduct.addProduct()}"/>
             </h:form>
        </h:panelGrid>
         </h:form>         
         
         <h:panelGrid columns="2">
             
             
             
             
             <f:view>

                 <h:form>
                     <h3><h:outputText value="Products Added"/></h3>
                     <h:dataTable value="#{eventAddProduct.products}" var="item">
                         <h:column>
                             <f:facet name="header">
                                 <h:outputText value="Idproduct"/>
                             </f:facet>
                             <h:outputText value="#{item.idproduct}"/>
                         </h:column>
                         <h:column>
                             <f:facet name="header">
                                 <h:outputText value="Name"/>
                             </f:facet>
                             <h:outputText value="#{item.name}"/>
                         </h:column>
                         <h:column>
                             <f:facet name="header">
                                 <h:outputText value="Detail"/>
                             </f:facet>
                             <h:outputText value="#{item.detail}"/>
                         </h:column>
                         <h:column>
                             <f:facet name="header">
                                 <h:outputText value="Idauction"/>
                             </f:facet>
                             <h:outputText value="#{item.idauction.idauction}"/>
                         </h:column>
                     </h:dataTable>
                 </h:form>
             </f:view>

             
         </h:panelGrid>
         <h:form>
                 <p:commandButton value="Save Products"  ajax="false " action ="#{eventAddProduct.save()}"/>
         </h:form>
         
         <f:view>


         </f:view>
           <h:link value="Back" outcome="index" />
         
           

   </h:body>
</html>

